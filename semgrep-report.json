{"version":"1.128.1","results":[{"check_id":"generic.secrets.security.detected-private-key.detected-private-key","path":"config/nginx/ssl/archivist.key","start":{"line":1,"col":1,"offset":0},"end":{"line":2,"col":65,"offset":92},"extra":{"message":"Private Key detected. This is a sensitive credential and should not be hardcoded here. Instead, store this in a separate, private file.","metadata":{"cwe":["CWE-798: Use of Hard-coded Credentials"],"source-rule-url":"https://github.com/grab/secret-scanner/blob/master/scanner/signatures/pattern.go","category":"security","technology":["secrets"],"confidence":"LOW","owasp":["A07:2021 - Identification and Authentication Failures"],"references":["https://owasp.org/Top10/A07_2021-Identification_and_Authentication_Failures"],"cwe2022-top25":true,"cwe2021-top25":true,"subcategory":["audit"],"likelihood":"LOW","impact":"MEDIUM","license":"Semgrep Rules License v1.0. For more details, visit semgrep.dev/legal/rules-license","vulnerability_class":["Hard-coded Secrets"],"source":"https://semgrep.dev/r/generic.secrets.security.detected-private-key.detected-private-key","shortlink":"https://sg.run/b7dr"},"severity":"ERROR","fingerprint":"requires login","lines":"requires login","validation_state":"NO_VALIDATOR","engine_kind":"OSS"}},{"check_id":"python.flask.security.audit.app-run-param-config.avoid_app_run_with_bad_host","path":"core/app.py","start":{"line":117,"col":5,"offset":4271},"end":{"line":117,"col":51,"offset":4317},"extra":{"message":"Running flask app with host 0.0.0.0 could expose the server publicly.","metadata":{"cwe":["CWE-668: Exposure of Resource to Wrong Sphere"],"owasp":["A01:2021 - Broken Access Control"],"category":"security","technology":["flask"],"references":["https://owasp.org/Top10/A01_2021-Broken_Access_Control"],"subcategory":["vuln"],"likelihood":"HIGH","impact":"MEDIUM","confidence":"HIGH","license":"Semgrep Rules License v1.0. For more details, visit semgrep.dev/legal/rules-license","vulnerability_class":["Other"],"source":"https://semgrep.dev/r/python.flask.security.audit.app-run-param-config.avoid_app_run_with_bad_host","shortlink":"https://sg.run/eLby"},"severity":"WARNING","fingerprint":"requires login","lines":"requires login","validation_state":"NO_VALIDATOR","engine_kind":"OSS"}},{"check_id":"python.flask.security.audit.debug-enabled.debug-enabled","path":"core/app.py","start":{"line":117,"col":5,"offset":4271},"end":{"line":117,"col":51,"offset":4317},"extra":{"message":"Detected Flask app with debug=True. Do not deploy to production with this flag enabled as it will leak sensitive information. Instead, consider using Flask configuration variables or setting 'debug' using system environment variables.","metadata":{"cwe":["CWE-489: Active Debug Code"],"owasp":"A06:2017 - Security Misconfiguration","references":["https://labs.detectify.com/2015/10/02/how-patreon-got-hacked-publicly-exposed-werkzeug-debugger/"],"category":"security","technology":["flask"],"subcategory":["vuln"],"likelihood":"HIGH","impact":"MEDIUM","confidence":"HIGH","license":"Semgrep Rules License v1.0. For more details, visit semgrep.dev/legal/rules-license","vulnerability_class":["Active Debug Code"],"source":"https://semgrep.dev/r/python.flask.security.audit.debug-enabled.debug-enabled","shortlink":"https://sg.run/dKrd"},"severity":"WARNING","fingerprint":"requires login","lines":"requires login","validation_state":"NO_VALIDATOR","engine_kind":"OSS"}},{"check_id":"yaml.docker-compose.security.no-new-privileges.no-new-privileges","path":"docker-compose.yml","start":{"line":4,"col":3,"offset":28},"end":{"line":4,"col":8,"offset":33},"extra":{"message":"Service 'nginx' allows for privilege escalation via setuid or setgid binaries. Add 'no-new-privileges:true' in 'security_opt' to prevent this.","metadata":{"cwe":["CWE-732: Incorrect Permission Assignment for Critical Resource"],"owasp":["A05:2021 - Security Misconfiguration","A06:2017 - Security Misconfiguration"],"references":["https://raesene.github.io/blog/2019/06/01/docker-capabilities-and-no-new-privs/","https://www.kernel.org/doc/Documentation/prctl/no_new_privs.txt","https://cheatsheetseries.owasp.org/cheatsheets/Docker_Security_Cheat_Sheet.html#rule-4-add-no-new-privileges-flag"],"category":"security","technology":["docker-compose"],"cwe2021-top25":true,"subcategory":["audit"],"likelihood":"LOW","impact":"HIGH","confidence":"LOW","license":"Semgrep Rules License v1.0. For more details, visit semgrep.dev/legal/rules-license","vulnerability_class":["Improper Authorization"],"source":"https://semgrep.dev/r/yaml.docker-compose.security.no-new-privileges.no-new-privileges","shortlink":"https://sg.run/0n8q"},"severity":"WARNING","fingerprint":"requires login","lines":"requires login","validation_state":"NO_VALIDATOR","engine_kind":"OSS"}},{"check_id":"yaml.docker-compose.security.writable-filesystem-service.writable-filesystem-service","path":"docker-compose.yml","start":{"line":4,"col":3,"offset":28},"end":{"line":4,"col":8,"offset":33},"extra":{"message":"Service 'nginx' is running with a writable root filesystem. This may allow malicious applications to download and run additional payloads, or modify container files. If an application inside a container has to save something temporarily consider using a tmpfs. Add 'read_only: true' to this service to prevent this.","metadata":{"cwe":["CWE-732: Incorrect Permission Assignment for Critical Resource"],"owasp":["A05:2021 - Security Misconfiguration","A06:2017 - Security Misconfiguration"],"references":["https://docs.docker.com/compose/compose-file/compose-file-v3/#domainname-hostname-ipc-mac_address-privileged-read_only-shm_size-stdin_open-tty-user-working_dir","https://blog.atomist.com/security-of-docker-kubernetes/","https://cheatsheetseries.owasp.org/cheatsheets/Docker_Security_Cheat_Sheet.html#rule-8-set-filesystem-and-volumes-to-read-only"],"category":"security","technology":["docker-compose"],"cwe2021-top25":true,"subcategory":["audit"],"likelihood":"LOW","impact":"HIGH","confidence":"LOW","license":"Semgrep Rules License v1.0. For more details, visit semgrep.dev/legal/rules-license","vulnerability_class":["Improper Authorization"],"source":"https://semgrep.dev/r/yaml.docker-compose.security.writable-filesystem-service.writable-filesystem-service","shortlink":"https://sg.run/e4JE"},"severity":"WARNING","fingerprint":"requires login","lines":"requires login","validation_state":"NO_VALIDATOR","engine_kind":"OSS"}},{"check_id":"yaml.docker-compose.security.no-new-privileges.no-new-privileges","path":"docker-compose.yml","start":{"line":19,"col":3,"offset":339},"end":{"line":19,"col":10,"offset":346},"extra":{"message":"Service 'certbot' allows for privilege escalation via setuid or setgid binaries. Add 'no-new-privileges:true' in 'security_opt' to prevent this.","metadata":{"cwe":["CWE-732: Incorrect Permission Assignment for Critical Resource"],"owasp":["A05:2021 - Security Misconfiguration","A06:2017 - Security Misconfiguration"],"references":["https://raesene.github.io/blog/2019/06/01/docker-capabilities-and-no-new-privs/","https://www.kernel.org/doc/Documentation/prctl/no_new_privs.txt","https://cheatsheetseries.owasp.org/cheatsheets/Docker_Security_Cheat_Sheet.html#rule-4-add-no-new-privileges-flag"],"category":"security","technology":["docker-compose"],"cwe2021-top25":true,"subcategory":["audit"],"likelihood":"LOW","impact":"HIGH","confidence":"LOW","license":"Semgrep Rules License v1.0. For more details, visit semgrep.dev/legal/rules-license","vulnerability_class":["Improper Authorization"],"source":"https://semgrep.dev/r/yaml.docker-compose.security.no-new-privileges.no-new-privileges","shortlink":"https://sg.run/0n8q"},"severity":"WARNING","fingerprint":"requires login","lines":"requires login","validation_state":"NO_VALIDATOR","engine_kind":"OSS"}},{"check_id":"yaml.docker-compose.security.writable-filesystem-service.writable-filesystem-service","path":"docker-compose.yml","start":{"line":19,"col":3,"offset":339},"end":{"line":19,"col":10,"offset":346},"extra":{"message":"Service 'certbot' is running with a writable root filesystem. This may allow malicious applications to download and run additional payloads, or modify container files. If an application inside a container has to save something temporarily consider using a tmpfs. Add 'read_only: true' to this service to prevent this.","metadata":{"cwe":["CWE-732: Incorrect Permission Assignment for Critical Resource"],"owasp":["A05:2021 - Security Misconfiguration","A06:2017 - Security Misconfiguration"],"references":["https://docs.docker.com/compose/compose-file/compose-file-v3/#domainname-hostname-ipc-mac_address-privileged-read_only-shm_size-stdin_open-tty-user-working_dir","https://blog.atomist.com/security-of-docker-kubernetes/","https://cheatsheetseries.owasp.org/cheatsheets/Docker_Security_Cheat_Sheet.html#rule-8-set-filesystem-and-volumes-to-read-only"],"category":"security","technology":["docker-compose"],"cwe2021-top25":true,"subcategory":["audit"],"likelihood":"LOW","impact":"HIGH","confidence":"LOW","license":"Semgrep Rules License v1.0. For more details, visit semgrep.dev/legal/rules-license","vulnerability_class":["Improper Authorization"],"source":"https://semgrep.dev/r/yaml.docker-compose.security.writable-filesystem-service.writable-filesystem-service","shortlink":"https://sg.run/e4JE"},"severity":"WARNING","fingerprint":"requires login","lines":"requires login","validation_state":"NO_VALIDATOR","engine_kind":"OSS"}},{"check_id":"yaml.docker-compose.security.no-new-privileges.no-new-privileges","path":"docker-compose.yml","start":{"line":84,"col":3,"offset":1761},"end":{"line":84,"col":8,"offset":1766},"extra":{"message":"Service 'redis' allows for privilege escalation via setuid or setgid binaries. Add 'no-new-privileges:true' in 'security_opt' to prevent this.","metadata":{"cwe":["CWE-732: Incorrect Permission Assignment for Critical Resource"],"owasp":["A05:2021 - Security Misconfiguration","A06:2017 - Security Misconfiguration"],"references":["https://raesene.github.io/blog/2019/06/01/docker-capabilities-and-no-new-privs/","https://www.kernel.org/doc/Documentation/prctl/no_new_privs.txt","https://cheatsheetseries.owasp.org/cheatsheets/Docker_Security_Cheat_Sheet.html#rule-4-add-no-new-privileges-flag"],"category":"security","technology":["docker-compose"],"cwe2021-top25":true,"subcategory":["audit"],"likelihood":"LOW","impact":"HIGH","confidence":"LOW","license":"Semgrep Rules License v1.0. For more details, visit semgrep.dev/legal/rules-license","vulnerability_class":["Improper Authorization"],"source":"https://semgrep.dev/r/yaml.docker-compose.security.no-new-privileges.no-new-privileges","shortlink":"https://sg.run/0n8q"},"severity":"WARNING","fingerprint":"requires login","lines":"requires login","validation_state":"NO_VALIDATOR","engine_kind":"OSS"}},{"check_id":"yaml.docker-compose.security.writable-filesystem-service.writable-filesystem-service","path":"docker-compose.yml","start":{"line":84,"col":3,"offset":1761},"end":{"line":84,"col":8,"offset":1766},"extra":{"message":"Service 'redis' is running with a writable root filesystem. This may allow malicious applications to download and run additional payloads, or modify container files. If an application inside a container has to save something temporarily consider using a tmpfs. Add 'read_only: true' to this service to prevent this.","metadata":{"cwe":["CWE-732: Incorrect Permission Assignment for Critical Resource"],"owasp":["A05:2021 - Security Misconfiguration","A06:2017 - Security Misconfiguration"],"references":["https://docs.docker.com/compose/compose-file/compose-file-v3/#domainname-hostname-ipc-mac_address-privileged-read_only-shm_size-stdin_open-tty-user-working_dir","https://blog.atomist.com/security-of-docker-kubernetes/","https://cheatsheetseries.owasp.org/cheatsheets/Docker_Security_Cheat_Sheet.html#rule-8-set-filesystem-and-volumes-to-read-only"],"category":"security","technology":["docker-compose"],"cwe2021-top25":true,"subcategory":["audit"],"likelihood":"LOW","impact":"HIGH","confidence":"LOW","license":"Semgrep Rules License v1.0. For more details, visit semgrep.dev/legal/rules-license","vulnerability_class":["Improper Authorization"],"source":"https://semgrep.dev/r/yaml.docker-compose.security.writable-filesystem-service.writable-filesystem-service","shortlink":"https://sg.run/e4JE"},"severity":"WARNING","fingerprint":"requires login","lines":"requires login","validation_state":"NO_VALIDATOR","engine_kind":"OSS"}},{"check_id":"yaml.docker-compose.security.no-new-privileges.no-new-privileges","path":"docker-compose.yml","start":{"line":102,"col":3,"offset":2078},"end":{"line":102,"col":5,"offset":2080},"extra":{"message":"Service 'db' allows for privilege escalation via setuid or setgid binaries. Add 'no-new-privileges:true' in 'security_opt' to prevent this.","metadata":{"cwe":["CWE-732: Incorrect Permission Assignment for Critical Resource"],"owasp":["A05:2021 - Security Misconfiguration","A06:2017 - Security Misconfiguration"],"references":["https://raesene.github.io/blog/2019/06/01/docker-capabilities-and-no-new-privs/","https://www.kernel.org/doc/Documentation/prctl/no_new_privs.txt","https://cheatsheetseries.owasp.org/cheatsheets/Docker_Security_Cheat_Sheet.html#rule-4-add-no-new-privileges-flag"],"category":"security","technology":["docker-compose"],"cwe2021-top25":true,"subcategory":["audit"],"likelihood":"LOW","impact":"HIGH","confidence":"LOW","license":"Semgrep Rules License v1.0. For more details, visit semgrep.dev/legal/rules-license","vulnerability_class":["Improper Authorization"],"source":"https://semgrep.dev/r/yaml.docker-compose.security.no-new-privileges.no-new-privileges","shortlink":"https://sg.run/0n8q"},"severity":"WARNING","fingerprint":"requires login","lines":"requires login","validation_state":"NO_VALIDATOR","engine_kind":"OSS"}},{"check_id":"yaml.docker-compose.security.writable-filesystem-service.writable-filesystem-service","path":"docker-compose.yml","start":{"line":102,"col":3,"offset":2078},"end":{"line":102,"col":5,"offset":2080},"extra":{"message":"Service 'db' is running with a writable root filesystem. This may allow malicious applications to download and run additional payloads, or modify container files. If an application inside a container has to save something temporarily consider using a tmpfs. Add 'read_only: true' to this service to prevent this.","metadata":{"cwe":["CWE-732: Incorrect Permission Assignment for Critical Resource"],"owasp":["A05:2021 - Security Misconfiguration","A06:2017 - Security Misconfiguration"],"references":["https://docs.docker.com/compose/compose-file/compose-file-v3/#domainname-hostname-ipc-mac_address-privileged-read_only-shm_size-stdin_open-tty-user-working_dir","https://blog.atomist.com/security-of-docker-kubernetes/","https://cheatsheetseries.owasp.org/cheatsheets/Docker_Security_Cheat_Sheet.html#rule-8-set-filesystem-and-volumes-to-read-only"],"category":"security","technology":["docker-compose"],"cwe2021-top25":true,"subcategory":["audit"],"likelihood":"LOW","impact":"HIGH","confidence":"LOW","license":"Semgrep Rules License v1.0. For more details, visit semgrep.dev/legal/rules-license","vulnerability_class":["Improper Authorization"],"source":"https://semgrep.dev/r/yaml.docker-compose.security.writable-filesystem-service.writable-filesystem-service","shortlink":"https://sg.run/e4JE"},"severity":"WARNING","fingerprint":"requires login","lines":"requires login","validation_state":"NO_VALIDATOR","engine_kind":"OSS"}},{"check_id":"yaml.docker-compose.security.no-new-privileges.no-new-privileges","path":"docker-compose.yml","start":{"line":124,"col":3,"offset":2637},"end":{"line":124,"col":13,"offset":2647},"extra":{"message":"Service 'prometheus' allows for privilege escalation via setuid or setgid binaries. Add 'no-new-privileges:true' in 'security_opt' to prevent this.","metadata":{"cwe":["CWE-732: Incorrect Permission Assignment for Critical Resource"],"owasp":["A05:2021 - Security Misconfiguration","A06:2017 - Security Misconfiguration"],"references":["https://raesene.github.io/blog/2019/06/01/docker-capabilities-and-no-new-privs/","https://www.kernel.org/doc/Documentation/prctl/no_new_privs.txt","https://cheatsheetseries.owasp.org/cheatsheets/Docker_Security_Cheat_Sheet.html#rule-4-add-no-new-privileges-flag"],"category":"security","technology":["docker-compose"],"cwe2021-top25":true,"subcategory":["audit"],"likelihood":"LOW","impact":"HIGH","confidence":"LOW","license":"Semgrep Rules License v1.0. For more details, visit semgrep.dev/legal/rules-license","vulnerability_class":["Improper Authorization"],"source":"https://semgrep.dev/r/yaml.docker-compose.security.no-new-privileges.no-new-privileges","shortlink":"https://sg.run/0n8q"},"severity":"WARNING","fingerprint":"requires login","lines":"requires login","validation_state":"NO_VALIDATOR","engine_kind":"OSS"}},{"check_id":"yaml.docker-compose.security.writable-filesystem-service.writable-filesystem-service","path":"docker-compose.yml","start":{"line":124,"col":3,"offset":2637},"end":{"line":124,"col":13,"offset":2647},"extra":{"message":"Service 'prometheus' is running with a writable root filesystem. This may allow malicious applications to download and run additional payloads, or modify container files. If an application inside a container has to save something temporarily consider using a tmpfs. Add 'read_only: true' to this service to prevent this.","metadata":{"cwe":["CWE-732: Incorrect Permission Assignment for Critical Resource"],"owasp":["A05:2021 - Security Misconfiguration","A06:2017 - Security Misconfiguration"],"references":["https://docs.docker.com/compose/compose-file/compose-file-v3/#domainname-hostname-ipc-mac_address-privileged-read_only-shm_size-stdin_open-tty-user-working_dir","https://blog.atomist.com/security-of-docker-kubernetes/","https://cheatsheetseries.owasp.org/cheatsheets/Docker_Security_Cheat_Sheet.html#rule-8-set-filesystem-and-volumes-to-read-only"],"category":"security","technology":["docker-compose"],"cwe2021-top25":true,"subcategory":["audit"],"likelihood":"LOW","impact":"HIGH","confidence":"LOW","license":"Semgrep Rules License v1.0. For more details, visit semgrep.dev/legal/rules-license","vulnerability_class":["Improper Authorization"],"source":"https://semgrep.dev/r/yaml.docker-compose.security.writable-filesystem-service.writable-filesystem-service","shortlink":"https://sg.run/e4JE"},"severity":"WARNING","fingerprint":"requires login","lines":"requires login","validation_state":"NO_VALIDATOR","engine_kind":"OSS"}},{"check_id":"yaml.docker-compose.security.no-new-privileges.no-new-privileges","path":"docker-compose.yml","start":{"line":143,"col":3,"offset":3150},"end":{"line":143,"col":10,"offset":3157},"extra":{"message":"Service 'grafana' allows for privilege escalation via setuid or setgid binaries. Add 'no-new-privileges:true' in 'security_opt' to prevent this.","metadata":{"cwe":["CWE-732: Incorrect Permission Assignment for Critical Resource"],"owasp":["A05:2021 - Security Misconfiguration","A06:2017 - Security Misconfiguration"],"references":["https://raesene.github.io/blog/2019/06/01/docker-capabilities-and-no-new-privs/","https://www.kernel.org/doc/Documentation/prctl/no_new_privs.txt","https://cheatsheetseries.owasp.org/cheatsheets/Docker_Security_Cheat_Sheet.html#rule-4-add-no-new-privileges-flag"],"category":"security","technology":["docker-compose"],"cwe2021-top25":true,"subcategory":["audit"],"likelihood":"LOW","impact":"HIGH","confidence":"LOW","license":"Semgrep Rules License v1.0. For more details, visit semgrep.dev/legal/rules-license","vulnerability_class":["Improper Authorization"],"source":"https://semgrep.dev/r/yaml.docker-compose.security.no-new-privileges.no-new-privileges","shortlink":"https://sg.run/0n8q"},"severity":"WARNING","fingerprint":"requires login","lines":"requires login","validation_state":"NO_VALIDATOR","engine_kind":"OSS"}},{"check_id":"yaml.docker-compose.security.writable-filesystem-service.writable-filesystem-service","path":"docker-compose.yml","start":{"line":143,"col":3,"offset":3150},"end":{"line":143,"col":10,"offset":3157},"extra":{"message":"Service 'grafana' is running with a writable root filesystem. This may allow malicious applications to download and run additional payloads, or modify container files. If an application inside a container has to save something temporarily consider using a tmpfs. Add 'read_only: true' to this service to prevent this.","metadata":{"cwe":["CWE-732: Incorrect Permission Assignment for Critical Resource"],"owasp":["A05:2021 - Security Misconfiguration","A06:2017 - Security Misconfiguration"],"references":["https://docs.docker.com/compose/compose-file/compose-file-v3/#domainname-hostname-ipc-mac_address-privileged-read_only-shm_size-stdin_open-tty-user-working_dir","https://blog.atomist.com/security-of-docker-kubernetes/","https://cheatsheetseries.owasp.org/cheatsheets/Docker_Security_Cheat_Sheet.html#rule-8-set-filesystem-and-volumes-to-read-only"],"category":"security","technology":["docker-compose"],"cwe2021-top25":true,"subcategory":["audit"],"likelihood":"LOW","impact":"HIGH","confidence":"LOW","license":"Semgrep Rules License v1.0. For more details, visit semgrep.dev/legal/rules-license","vulnerability_class":["Improper Authorization"],"source":"https://semgrep.dev/r/yaml.docker-compose.security.writable-filesystem-service.writable-filesystem-service","shortlink":"https://sg.run/e4JE"},"severity":"WARNING","fingerprint":"requires login","lines":"requires login","validation_state":"NO_VALIDATOR","engine_kind":"OSS"}},{"check_id":"python.lang.security.audit.subprocess-shell-true.subprocess-shell-true","path":"transdirectmake.py","start":{"line":10,"col":31,"offset":156},"end":{"line":10,"col":35,"offset":160},"extra":{"message":"Found 'subprocess' function 'run' with 'shell=True'. This is dangerous because this call will spawn the command using a shell process. Doing so propagates current shell settings and variables, which makes it much easier for a malicious actor to execute commands. Use 'shell=False' instead.","fix":"False","metadata":{"source-rule-url":"https://bandit.readthedocs.io/en/latest/plugins/b602_subprocess_popen_with_shell_equals_true.html","owasp":["A01:2017 - Injection","A03:2021 - Injection"],"cwe":["CWE-78: Improper Neutralization of Special Elements used in an OS Command ('OS Command Injection')"],"references":["https://stackoverflow.com/questions/3172470/actual-meaning-of-shell-true-in-subprocess","https://docs.python.org/3/library/subprocess.html"],"category":"security","technology":["python"],"cwe2022-top25":true,"cwe2021-top25":true,"subcategory":["secure default"],"likelihood":"HIGH","impact":"LOW","confidence":"MEDIUM","license":"Semgrep Rules License v1.0. For more details, visit semgrep.dev/legal/rules-license","vulnerability_class":["Command Injection"],"source":"https://semgrep.dev/r/python.lang.security.audit.subprocess-shell-true.subprocess-shell-true","shortlink":"https://sg.run/J92w"},"severity":"ERROR","fingerprint":"requires login","lines":"requires login","validation_state":"NO_VALIDATOR","engine_kind":"OSS"}}],"errors":[{"code":3,"level":"warn","type":["PartialParsing",[{"path":"scripts/download_pyan_seg.sh","start":{"line":1,"col":1,"offset":0},"end":{"line":47,"col":98,"offset":1750}}]],"message":"Syntax error at line scripts/download_pyan_seg.sh:1:\n `import os\nimport torch\nimport torch.torch_version\nfrom pyannote.audio import Model\nfrom omegaconf import ListConfig\nfrom omegaconf.base import ContainerMetadata, Metadata\nfrom omegaconf.nodes import AnyNode\nfrom typing import Any\nimport collections\n\n# Add required classes to safe globals for PyTorch 2.6+\ntorch.serialization.add_safe_globals([\n    ListConfig, ContainerMetadata, Metadata, Any, list, collections.defaultdict, dict, int, AnyNode,\n    torch.torch_version.TorchVersion\n])\n\n# Set the target directory\ntarget_dir = \"/opt/Archivist/.venv/lib/python3.11/site-packages/faster_whisper/assets\"\nos.makedirs(target_dir, exist_ok=True)\n\ndef patched_load(*args, **kwargs):\n    kwargs['weights_only'] = False\n    return torch.load(*args, **kwargs)\n\n# Patch torch.load globally (for this script)\nimport lightning_fabric.utilities.cloud_io\nlightning_fabric.utilities.cloud_io.pl_load = patched_load\n\n# Download the model to the specific location\nmodel = Model.from_pretrained(\n    \"pyannote/segmentation\",\n    use_auth_token=\"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\",\n    cache_dir=target_dir\n)\n\n# Verify the downloaded model file size\nmodel_file = os.path.join(target_dir, 'pytorch_model.bin')\nif os.path.exists(model_file):\n    file_size = os.path.getsize(model_file)\n    if file_size == 0:\n        raise ValueError('Downloaded model file is empty. Please check the download process.')\n    elif file_size < 1000:  # Arbitrary size check, adjust as needed\n        raise ValueError('Downloaded model file is too small. Please check the download process.')\n    else:\n        print(f'Model file downloaded successfully with size: {file_size} bytes.')\nelse:\n    raise FileNotFoundError('Model file was not downloaded. Please check the download process.')\n` was unexpected","path":"scripts/download_pyan_seg.sh","spans":[{"file":"scripts/download_pyan_seg.sh","start":{"line":1,"col":1,"offset":0},"end":{"line":47,"col":98,"offset":1750}}]}],"paths":{"scanned":[".dockerignore",".env.example",".github/workflows/README.md",".gitignore","=2.16.0","=5.2.1,","Dockerfile.web","Dockerfile.worker","IMMEDIATE_IMPROVEMENTS.md","Makefile","PROPOSED_STRUCTURE.md","README.md","REORGANIZATION_PROGRESS.md","Read Me Backend.txt","SECURITY_IMPLEMENTATION_SUMMARY.md","SECURITY_RECOMMENDATIONS_IMPLEMENTED.md","SECURITY_REVIEW.md","alembic.ini","backups/web_app_modular.py","backups/web_app_original.py","bandit-report.json","cableTV21","config/certbot/conf/accounts/acme-v02.api.letsencrypt.org/directory/1d42154c037d423f145eda1ec6ce1439/meta.json","config/certbot/conf/accounts/acme-v02.api.letsencrypt.org/directory/1d42154c037d423f145eda1ec6ce1439/private_key.json","config/certbot/conf/accounts/acme-v02.api.letsencrypt.org/directory/1d42154c037d423f145eda1ec6ce1439/regr.json","config/certbot/conf/options-ssl-nginx.conf","config/certbot/conf/ssl-dhparams.pem","config/grafana/provisioning/dashboards/archivist.json","config/nginx/conf.d/default.conf","config/nginx/ssl/archivist.crt","config/nginx/ssl/archivist.key","config/prometheus/prometheus.yml","core/__init__.py","core/api/routes/__init__.py","core/api/routes/browse.py","core/api/routes/queue.py","core/api/routes/transcribe.py","core/api/routes/vod.py","core/api_docs.py","core/app.py","core/auth.py","core/cablecast_client.py","core/cablecast_integration.py","core/cablecast_show_mapper.py","core/cablecast_transcription_linker.py","core/check_mounts.py","core/config.py","core/database.py","core/exceptions.py","core/failed_job_cleaner.py","core/file_manager.py","core/logging_config.py","core/models.py","core/scc_summarizer.py","core/security.py","core/services/__init__.py","core/services/file.py","core/services/queue.py","core/services/transcription.py","core/services/vod.py","core/static/css/main.css","core/static/favicon.ico","core/task_queue.py","core/templates/index.html","core/video_captioner.py","core/vod_automation.py","core/vod_content_manager.py","core/web_app.py","data/output/10845-1-Birchwood City Council (20160614).srt","docker-compose.yml","docs/API_REFERENCE.md","docs/CABLECAST_VOD_INTEGRATION.md","docs/FLEX_SERVER_DOCUMENTATION.md","docs/INDEX.md","docs/INTEGRATION_GUIDE.md","docs/SERVICE_LAYER.md","docs/TECHNICAL_DOCUMENTATION.md","docs/USER_MANUAL.md","docs/VOD_CONFIGURATION_EXAMPLE.md","docs/VOD_QUICK_REFERENCE.md","docs/WORKFLOW_DOCUMENTATION.md","docs/pdf/API.pdf","docs/pdf/cablecast_api_last_half.pdf","load_test_results.json","migrations/add_cablecast_shows_table.sql","migrations/add_cablecast_vod_tables.py","migrations/alembic.ini","migrations/env.py","migrations/script.py.mako","migrations/versions/add_error_column.py","migrations/versions/f28a9d8074bb_add_transcription_job_and_result_tables.py","pytest.ini","requirements/base.txt","requirements/dev.txt","requirements/ml.txt","requirements/prod.txt","requirements/security.txt","requirements-test.txt","requirements.txt","run_web.sh","scripts/README.md","scripts/backfill_transcriptions.py","scripts/deploy.sh","scripts/deployment/init-letsencrypt.sh","scripts/deployment/setup-grafana.sh","scripts/development/create_cablecast_tables.py","scripts/development/vod_cli.py","scripts/disable_github_actions.sh","scripts/download_pyan_seg.sh","scripts/local_security_scan.py","scripts/manage_deps.py","scripts/monitoring/monitor.py","scripts/monitoring/vod_sync_monitor.py","scripts/reorganize_codebase.py","scripts/run_tests.sh","scripts/run_web.sh","scripts/run_worker.sh","scripts/run_worker_debug.sh","scripts/show_debug_logs.sh","scripts/start_archivist.sh","scripts/stop_archivist.sh","scripts/update_docs.py","setup.py","setup_transcriptions.sh","sitecustomize.py","transdirectmake.py","web/api/cablecast.py"]},"time":{"rules":[],"rules_parse_time":3.2097110748291016,"profiling_times":{"config_time":10.088029384613037,"core_time":6.326611518859863,"ignores_time":0.002450227737426758,"total_time":16.41861081123352},"parsing_time":{"total_time":1.4137771129608154,"per_file_time":{"mean":0.018850361506144206,"std_dev":0.0005342995090127161},"very_slow_files":[]},"targets":[],"total_bytes":0,"max_memory_bytes":1117586432},"skipped_rules":[]}